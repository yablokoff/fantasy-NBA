!function(e){function t(t){for(var n,s,o=t[0],i=t[1],l=t[2],u=0,m=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(d&&d(t);m.length;)m.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==r[i]&&(n=!1)}n&&(c.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={0:0},c=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=i;c.push([86,1]),a()}({13:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return s}));const n=70,r=5,c=3,s="YYYY-MM-DD"},16:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(52);const r=a.n(n).a.create({baseURL:"https://api.airtable.com/v0/appLEgyLGr8Xpum8P/",timeout:5e3,headers:{Authorization:"Bearer keyQcY7BJrFix6otc","Content-Type":"application/json",accept:"application/json"}}),c={cards:"Cards",users:"Users",sets:"Sets"},s=e=>e.records.map(e=>{const t=e.fields,a=t.Card[0];return{db_id:e.id,id:t["Card ID"],name:t.Name,image_url:a.url}})},20:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return E}));var n=a(7),r=a.n(n),c=a(23),s=a.n(c),o=a(51),i=a.n(o);const l=function(){};l.prototype.STORE_KEY="store_key",l.prototype._formatting=function(e){return e},l.prototype.set=function(e){const t=JSON.stringify(this._formatting(e));return localStorage.setItem(this.STORE_KEY,t),t},l.prototype.get=function(){let e;const t=localStorage.getItem(this.STORE_KEY);try{e=JSON.parse(t)}catch(t){e=null}return e},l.prototype.clear=function(){localStorage.removeItem(this.STORE_KEY)};var d=a(13),u=a(28);s.a.extend(i.a);const m=function(){};(m.prototype=Object.create(l.prototype)).constructor=l,m.prototype.STORE_KEY="fetched_cards",m.prototype._formatting=function(e){const t=s.a.utc();return r()({date:t.format(d.d)},e)},m.prototype.getIds=function(){const e=this.get();return e&&e.date===s.a.utc().format(d.d)?e.card_ids:Object(u.a)({count:d.c,rangeMax:d.a})};const p=new m,f=function(){};(f.prototype=Object.create(l.prototype)).constructor=l,f.prototype.STORE_KEY="selected_cards",f.prototype._formatting=function({selected_ids:e,ts:t}){return{date:s.a.utc(t).format(d.d),card_ids:e}},f.prototype.checkForInvalidate=function(){const e=this.get();if(e){const t=s.a.utc();if(e.date===t.format(d.d))return e;this.clear()}};const E=new f},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));const n=(e,t)=>{let a=e+Math.random()*(t+1-e);return Math.floor(a)},r=({count:e=5,rangeMin:t=1,rangeMax:a=100})=>{let r=[];for(;r.length<e;){const e=n(t,a);r.includes(e)||r.push(e)}return r},c=e=>new Promise(t=>{const a=new Image;a.onload=()=>t({path:e,status:"ok"}),a.onerror=()=>t({path:e,status:"error"}),a.src=e}),s=e=>{if(!e||!e.length)throw new Error("sources required");return Promise.all(e.map(c))}},3:function(e,t,a){"use strict";a.d(t,"n",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"h",(function(){return o})),a.d(t,"g",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"l",(function(){return E})),a.d(t,"k",(function(){return g})),a.d(t,"m",(function(){return h}));var n=a(10);const r="SHOW_PRELOADER",c="HIDE_PRELOADER",s="LOGIN",o="LOGIN_"+n.a.Pending,i="LOGIN_"+n.a.Fulfilled,l="LOGIN_"+n.a.Rejected,d="LOAD_CARDS",u="LOAD_CARDS_"+n.a.Pending,m="LOAD_CARDS_"+n.a.Fulfilled,p="LOAD_CARDS_"+n.a.Rejected,f="SET_SELECTED_CARDS",E="SET_SELECTED_CARDS_"+n.a.Pending,g="SET_SELECTED_CARDS_"+n.a.Fulfilled,h="SET_SELECTED_CARDS_"+n.a.Rejected},30:function(e,t,a){"use strict";var n=a(15),r=a(3);const c={show:!1};var s=a(7),o=a.n(s);const i={isFetching:!1,response:null,error:!1};var l=(e=i,t)=>{switch(t.type){case r.h:return o()({},e,{isFetching:!0});case r.i:{const a=(t.payload.response||{}).data;return o()({},e,{isFetching:!1,response:a,error:!0})}case r.g:return o()({},e,{isFetching:!1,response:t.payload.data,error:!1});default:return e}},d=a(16);const u={cards:[],isFetching:!1,response:null,error:!1};var m=(e=u,t)=>{switch(t.type){case r.d:return o()({},e,{isFetching:!0});case r.e:{const a=(t.payload.response||{}).data;return o()({},e,{isFetching:!1,response:a,error:!0})}case r.c:return o()({},e,{isFetching:!1,cards:Object(d.b)(t.payload.data),error:!1});default:return e}};const p=a(20).b.checkForInvalidate(),f={ids:p?p.card_ids:[],isSending:!1,response:null,error:!1};const E=Object(n.c)({preloader:(e=c,t)=>{switch(t.type){case r.n:return{show:!0};case r.a:return{show:!1};default:return e}},user:l,cards:m,selectedCards:(e=f,t)=>{switch(t.type){case r.l:return o()({},e,{isSending:!0});case r.m:{const a=(t.payload.response||{}).data;return console.log(a),o()({},e,{isSending:!1,response:a,error:!0})}case r.k:return o()({},e,{isSending:!1,ids:t.meta.ids,error:!1});default:return e}}});t.a=E},53:function(e,t,a){e.exports=a(82)},82:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(29),c=a(10),s=a(30);const o=Object(n.e)(s.a,Object(n.a)(c.b,r.a));t.default=o},83:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(29),c=a(10),s=a(30);const o=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):n.d,i=Object(n.e)(s.a,o(Object(n.a)(c.b,r.a)));t.default=i},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a(21),o=a(4),i=a.n(o),l=a(8),d=a(5);var u=e=>Object(l.c)(e=>e.preloader).show?r.a.createElement("div",{className:"preloader__wrapper"},r.a.createElement("div",{className:"preloader"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"preloader-ball",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},r.a.createElement("circle",{cx:"50",cy:"50",r:"50.25",fill:"#f47436",stroke:"#eeeeee",strokeWidth:"4.5"}),r.a.createElement("path",{d:"M50 0L50 100",stroke:"#eeeeee",strokeWidth:"4"}),r.a.createElement("path",{d:"M14.644660940672622 14.644660940672622 A50 50 0 0 1 14.644660940672622 85.35533905932738",fill:"none",stroke:"#eeeeee",strokeWidth:"4"}),r.a.createElement("path",{d:"M85.35533905932738 14.644660940672622 A50 50 0 0 0 85.35533905932738 85.35533905932738",fill:"none",stroke:"#eeeeee",strokeWidth:"4"}),r.a.createElement("g",{transform:"translate(0 50)"},r.a.createElement("path",{d:"M0 0A50 50 0 0 1 100 0",fill:"none",stroke:"#eeeeee",strokeWidth:"4"},r.a.createElement("animate",{attributeName:"d",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.499999;0.5;1",keySplines:"0.1 0 1 0.9;0.5 0.5 0.5 0.5;0 0.1 0.9 1",values:"M0 0A50 50 0 0 1 100 0;M0 0A50 0 0 0 1 100 0;M0 0A50 0 0 0 0 100 0;M0 0A50 50 0 0 0 100 0",begin:"0"})),r.a.createElement("path",{d:"M0 0A50 50 0 0 1 100 0",fill:"none",stroke:"#eeeeee",strokeWidth:"4"},r.a.createElement("animate",{attributeName:"d",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.499999;0.5;1",keySplines:"0.1 0 1 0.9;0.5 0.5 0.5 0.5;0 0.1 0.9 1",values:"M0 0A50 50 0 0 1 100 0;M0 0A50 0 0 0 1 100 0;M0 0A50 0 0 0 0 100 0;M0 0A50 50 0 0 0 100 0",begin:"-0.5"})))))):null,m=a(7),p=a.n(m),f=a(50),E=a.n(f);const g=()=>localStorage.getItem("user_id"),h=()=>!!g();a(63);var b="/",v="/login",y="/thanks";const O=e=>{let t=e.component,a=E()(e,["component"]);return r.a.createElement(d.b,p()({},a,{render:e=>h()?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:v,state:{from:e.location}}})}))};O.propTypes={component:i.a.elementType.isRequired};var _=O;const N=e=>r.a.createElement("div",{id:"app-page"},r.a.createElement("main",{id:"app-main"},e.children));N.propTypes={children:i.a.element};var S=N,j=a(48),w=a(3),k=a(13),x=a(20),A=a(16);const D=()=>({type:w.n}),T=()=>({type:w.a}),R=e=>(t,a)=>{if(a().cards.isFetching)return Promise.reject(null);const n=`OR(${(e=e||x.a.getIds()).map(e=>"{Card ID}="+e).join(",")})`;return t({type:w.b,payload:A.a.get(A.c.cards,{params:{filterByFormula:n,maxRecords:k.c}})})};var M=a(28);const C={enter:"enter",enterActive:"active-enter",enterDone:"done-enter",exit:"exit",exitActive:"active-exit",exitDone:"done-exit"},P=e=>{const t=Object(l.b)(),a=Object(l.c)(e=>e.preloader).show,c=Object(l.c)(e=>e.cards).cards,s=Object(n.useState)(!1),o=s[0],i=s[1];Object(n.useEffect)(()=>{console.log("fetch cards"),a||t(D()),t(R()).then(({value:e,action:t})=>{if(t&&t.type===w.c){const t=Object(A.b)(e.data);return x.a.set({card_ids:t.map(e=>e.id)}),Object(M.b)(t.map(e=>e.image_url))}},e=>{}).then(()=>{t(T()),i(!0)})},[]);const d=Object(n.useState)(null),u=d[0],m=d[1],p=Object(n.useState)(Array(k.c).fill(0)),f=p[0],E=p[1],h=()=>f.filter(Boolean).length===k.b;return r.a.createElement("div",{className:"list"},c.map((e,t)=>{let a="card";return f[t]?a+=" selected":h()&&(a+=" skipped"),r.a.createElement(j.a,{in:o,timeout:2e3,classNames:C,key:e.id,unmountOnExit:!0},r.a.createElement("div",{className:"list-item"},r.a.createElement("div",{className:a,onClick:()=>(e=>{const t=f.slice();t[e]?t[e]=0:(h()&&(t[u]=0),t[e]=1),m(e),E(t)})(t)},r.a.createElement("div",{className:"card-image-wrapper"},r.a.createElement("img",{className:"card-image",src:e.image_url,alt:e.name})))))}),r.a.createElement(j.a,{in:o,timeout:2e3,key:"button",classNames:C,unmountOnExit:!0},r.a.createElement("div",{className:"list-item"},r.a.createElement("div",{className:"rules"},"select 3 & discard 2"),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{type:"button",className:"btn btn-green",onClick:e=>{t(D());const a=c.map(e=>e.id).filter((e,t)=>f[t]);t((e=>(t,a)=>{const n=a();if(n.selectedCards.isSending)return Promise.reject(null);const r=g();if(!r)return Promise.reject(null);const c=n.cards.cards;if(!c.length)return Promise.reject(null);const s=c.filter(t=>e.includes(t.id));return t({type:w.j,payload:A.a.post(A.c.sets,{fields:{User:[r],Cards:s.map(e=>e.db_id)}}),meta:{ids:e}})})(a)).then(({value:e,action:t})=>{t&&t.type===w.k&&(x.a.clear(),x.b.set({selected_ids:a,ts:e.data.fields.Date}))},e=>{})},disabled:!h()},r.a.createElement("span",{className:"btn-text"},"enter"))))))};P.propTypes={};var I=P;var L=()=>Object(l.c)(e=>e.selectedCards).ids.length?r.a.createElement(d.a,{to:y}):r.a.createElement(S,null,r.a.createElement("div",{className:"cards-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement(I,null)))),F=a(22),Y=a(18),X=a.n(Y),$=({name:e})=>{const t=e.split("").map((e,t)=>r.a.createElement("span",{key:t+e,className:"letter"},e));return r.a.createElement("div",{className:"head-label-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"head-label center-text"},r.a.createElement("div",{className:"letters"},r.a.createElement(X.a,{in:!0,duration:650,appear:!0,onEntering:{opacity:[0,1],translateX:function(e,t){return[-1*e.offsetLeft,0]},delay:F.default.stagger(50),easing:"easeOutQuint"}},t)))))};const W=["$100","signed hoodie","shoutout"].map(e=>r.a.createElement("li",{key:e,className:"award"},r.a.createElement("span",{className:"award-label"},e)));var B=({title:e})=>{const t=e.split("").map((e,t)=>r.a.createElement("span",{key:t+e,className:"letter"},e));return r.a.createElement("div",{className:"form-content center-text"},r.a.createElement(X.a,{in:!0,appear:!0,duration:1200,onEntering:{keyframes:[{backgroundPositionX:"calc(50% - 127px)",backgroundSize:"3px 3px"},{backgroundPositionX:"calc(50% - 0px)",backgroundSize:"260px 2px"}],delay:400,easing:"easeOutExpo"}},r.a.createElement("div",{className:"form-label"},r.a.createElement("div",{className:"letters"},r.a.createElement(X.a,{in:!0,duration:900,appear:!0,onEntering:{opacity:[0,1],translateX:[-140,0],scale:[1.2,1],rotateY:[-210,0],rotateZ:[-90,0],easing:"easeOutElastic(1, 0.6)",delay:F.default.stagger(80,{start:400})}},t)))),r.a.createElement("ul",{className:"awards"},r.a.createElement(X.a,{in:!0,duration:800,appear:!0,onEntering:{opacity:[0,1],translateX:[270,0],easing:"easeOutElastic(1, 0.7)",delay:F.default.stagger(100,{start:400})}},W)))},K=a(26);const q=(...e)=>t=>e.reduce((e,a)=>e||a(t),void 0),G=e=>e?void 0:"Required",J=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/gim,U=e=>e.match(J)?void 0:'Email does not match validation scheme "my@mail.com"',Z=/^(?!.*\.\.)(?!.*\.$)[^\W][\w.]{0,29}$/gim,z=e=>e.match(Z)?void 0:"Your name Instagram is incorrect",H=/\(?([0-9]{3})\)?([ .-])?([0-9]{3})([ .-])?([0-9]{4})/g,Q=e=>e.match(H)?void 0:"Phone does not match validation scheme (999) 999-9999",V=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,"");return t.length<=3?t:t.length<=7?`(${t.slice(0,3)}) ${t.slice(3,7)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},ee=({input:e,meta:t,placeholder:a,animationDelay:n})=>{const c=e.name,s=t.touched,o=t.error,i=o&&s;let l="field field-"+c;return i&&(l+=" invalid"),r.a.createElement(X.a,{in:!0,duration:800,appear:!0,onEntering:{opacity:[0,1],translateX:[-270,0],easing:"easeOutElastic(1, 0.7)",delay:600+n}},r.a.createElement("div",{className:l},r.a.createElement("div",{className:"control"},r.a.createElement("input",p()({},e,{type:"text",placeholder:a})),i&&r.a.createElement("div",{className:"error"},r.a.createElement("span",null,o)))))};ee.propTypes={input:i.a.object,meta:i.a.object};const te=({next:e})=>{const t=Object(l.b)();let a=Object(d.g)();return r.a.createElement(K.b,{onSubmit:n=>new Promise((function(r,c){return t(D()),r(t((s=n.email,o=n.instagram,i=n.phone,e=>{const t=g();return t?Promise.resolve(t):e({type:w.f,payload:A.a.post(A.c.users,{fields:{Email:s,Instagram:o,Phone:i}})})})).then(({value:t,action:n})=>{var r;n&&n.type===w.g&&(r=t.data.id,localStorage.setItem("user_id",r),a.push(e))},e=>{}));var s,o,i})),render:({handleSubmit:e,submitting:t,values:a})=>r.a.createElement("form",{className:"form",onSubmit:e},r.a.createElement("div",{className:"form-fields"},r.a.createElement(K.a,{name:"email",placeholder:"Email",animationDelay:0,component:ee,validate:q(G,U)}),r.a.createElement(K.a,{name:"instagram",placeholder:"Instagram handle",animationDelay:100,component:ee,validate:q(G,z)}),r.a.createElement(K.a,{name:"phone",placeholder:"(999) 999-9999",animationDelay:200,component:ee,validate:q(G,Q),parse:V})),r.a.createElement("div",{className:"form-btn-wrap center-text"},r.a.createElement(X.a,{in:!0,duration:1e3,appear:!0,onEntering:{opacity:[0,1],translateX:[270,0],rotateX:[-180,0],rotateY:[-210,0],rotateZ:[-90,0],delay:700,easing:"easeOutElastic(1, .7)"}},r.a.createElement("button",{type:"submit",disabled:t,className:"btn btn-green"},r.a.createElement("span",{className:"btn-text"},"deal")))))})};te.propTypes={next:i.a.oneOfType([i.a.string,i.a.object])};var ae=te;const ne=e=>{const t=(e.location.state||{}).from,a=(void 0===t?{}:t).pathname,n=void 0===a?b:a;return h()?r.a.createElement(d.a,{to:n}):r.a.createElement(S,null,r.a.createElement(r.a.Fragment,null,r.a.createElement($,{name:"frank michael smith's"}),r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement(B,{title:"5 card draw"}),r.a.createElement(ae,{next:n})))))};ne.propTypes={location:i.a.object.isRequired};var re=ne;var ce=()=>{const e=Object(l.b)(),t=Object(l.c)(e=>e.preloader).show,a=Object(l.c)(e=>e.selectedCards).ids,c=a.length;let s=Object(l.c)(e=>e.cards).cards;return s=s.filter(e=>a.includes(e.id)),Object(n.useEffect)(()=>{c&&!s.length?(t||e(D()),e(R(a)).then(({value:t,action:a})=>{a&&a.type===w.c&&e(T())},e=>{})):t&&e(T())},[]),c?r.a.createElement(S,null,r.a.createElement("div",{className:"thanks-wrapper"},r.a.createElement("div",{className:"container"},s.map(e=>r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"card-image-wrapper"},r.a.createElement("img",{className:"card-image",src:e.image_url,alt:e.name}))))))):r.a.createElement(d.a,{to:b})};const se=({store:e})=>r.a.createElement(l.a,{store:e},r.a.createElement(d.d,null,r.a.createElement(_,{exact:!0,path:b,component:L}),r.a.createElement(_,{path:y,component:ce}),r.a.createElement(d.b,{path:v,render:re}),r.a.createElement(d.b,{path:"*"},r.a.createElement(d.a,{to:b}))),r.a.createElement(u,null));se.propTypes={store:i.a.object.isRequired};var oe=se,ie=a(53),le=a.n(ie);a(84),a(85);Object(c.render)(r.a.createElement(s.a,null,r.a.createElement(oe,{store:le.a})),document.getElementById("root"))}});
//# sourceMappingURL=app-0e240587bcb658c337d8.bundle.min.js.map